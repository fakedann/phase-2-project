{"ast":null,"code":"import _defineProperty from\"/Users/danielescalona/Development/code/phase-2/phase-2-project/phase-2-project/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _toConsumableArray from\"/Users/danielescalona/Development/code/phase-2/phase-2-project/phase-2-project/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/danielescalona/Development/code/phase-2/phase-2-project/phase-2-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import CardItem from\"./CardItem\";import Modal from'react-bootstrap/Modal';import BookSearch from\"./BookSearch\";import{v4 as uuidv4}from'uuid';import*as moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BookSelection(){var _useState=useState({type:'',items:[]}),_useState2=_slicedToArray(_useState,2),results=_useState2[0],setResults=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),condModal=_useState6[0],setModal=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),resultTitle=_useState8[0],setTitle=_useState8[1];function fetchInput(searchData,checkedStatus){if(searchData===''){callModal(false);}else{setTitle(searchData);if(checkedStatus==='date'){var validDate=moment(searchData,'YYYY-MM-DD',true).isValid();if(validDate){try{fetch(\"https://api.nytimes.com/svc/books/v3/lists/\".concat(searchData,\"/hardcover-fiction.json?api-key=\").concat(process.env.REACT_APP_KEY)).then(function(data){if(data.ok){return data.json();}else{throw new Error(\"Status code error :\"+data.status);}}).then(function(data){var _setResults;setResults((_setResults={},_defineProperty(_setResults,'type','card'),_defineProperty(_setResults,'items',_toConsumableArray(data.results.books)),_setResults));}).catch(function(err){var _setResults2;console.log('daddad');setResults((_setResults2={},_defineProperty(_setResults2,'type','card'),_defineProperty(_setResults2,'items',[]),_setResults2));});}catch(e){console.error(e);}}else{var _setResults3;setResults((_setResults3={},_defineProperty(_setResults3,'type','card'),_defineProperty(_setResults3,'items',[]),_setResults3));callModal(false);}}else{try{fetch(\"https://api.nytimes.com/svc/books/v3/lists/best-sellers/history.json?\".concat(checkedStatus,\"=\").concat(searchData,\"&api-key=\").concat(process.env.REACT_APP_KEY)).then(function(data){if(data.ok){return data.json();}else{throw new Error(\"Status code error :\"+data.status);}}).then(function(data){var _setResults4;setResults((_setResults4={},_defineProperty(_setResults4,'type','card'),_defineProperty(_setResults4,'items',_toConsumableArray(data.results)),_setResults4));}).catch(function(err){var _setResults5;setResults((_setResults5={},_defineProperty(_setResults5,'type','card'),_defineProperty(_setResults5,'items',[]),_setResults5));});}catch(e){console.error(e);}}}}function callModal(resp){setShow(true);setModal(resp);if(resp===true){setTimeout(function(){setShow(false);},2000);}}return/*#__PURE__*/_jsxs(\"div\",{id:\"books\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Search for past weekly rankings, authors, or publishing companies\"}),/*#__PURE__*/_jsx(\"div\",{id:\"search-list\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-item\",children:[/*#__PURE__*/_jsx(BookSearch,{fetchInput:fetchInput}),resultTitle!==''?/*#__PURE__*/_jsxs(\"h5\",{id:\"srchBook\",children:[\"SEARCH RESULTS FOR: \",resultTitle]}):null,results.items.length===0&&resultTitle!==''?/*#__PURE__*/_jsx(\"h6\",{children:\"NO RESULTS\"}):null,/*#__PURE__*/_jsxs(Modal,{show:show,onHide:function onHide(){return setShow(false);},backdrop:\"static\",keyboard:false,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Notification\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:condModal?'Success!':'Invalid input. Please, try again.'})]}),results.type===''?null:results.items.map(function(bookObj,index){return/*#__PURE__*/_jsx(CardItem,{book:bookObj,results:results,callModal:callModal},index);})]})})]});}export default BookSelection;","map":{"version":3,"names":["React","useState","CardItem","Modal","BookSearch","v4","uuidv4","moment","BookSelection","type","items","results","setResults","show","setShow","condModal","setModal","resultTitle","setTitle","fetchInput","searchData","checkedStatus","callModal","validDate","isValid","fetch","process","env","REACT_APP_KEY","then","data","ok","json","Error","status","books","catch","err","console","log","e","error","resp","setTimeout","length","map","bookObj","index"],"sources":["/Users/danielescalona/Development/code/phase-2/phase-2-project/phase-2-project/src/BookSelection.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport CardItem from \"./CardItem\";\nimport Modal from 'react-bootstrap/Modal'\nimport BookSearch from \"./BookSearch\";\nimport { v4 as uuidv4 } from 'uuid';\nimport * as moment from 'moment';\n\nfunction BookSelection(){\n\n  const [results, setResults] = useState({\n    type: '',\n    items: []\n  })\n\n  const [show, setShow] = useState(false);\n  const [condModal, setModal] = useState(true)\n  const [resultTitle, setTitle] = useState('')\n\n\n  function fetchInput(searchData, checkedStatus){\n\n    if(searchData === ''){\n      callModal(false)\n    }else{\n      setTitle(searchData)\n    if(checkedStatus === 'date'){\n      let validDate = moment(searchData, 'YYYY-MM-DD',true).isValid();\n      if(validDate){\n        try{\n          fetch(`https://api.nytimes.com/svc/books/v3/lists/${searchData}/hardcover-fiction.json?api-key=${process.env.REACT_APP_KEY}`)\n          .then( data => {\n            if(data.ok){\n              return data.json();\n            }  \n            else{\n              throw new Error(\"Status code error :\" + data.status)\n            } \n          } )\n          .then( data => {\n            setResults({['type']: 'card', ['items']: [...data.results.books]})\n            \n          } )\n          .catch( (err) => {\n            console.log('daddad')\n            setResults({['type']: 'card', ['items']: []})\n            \n          })\n        } catch(e){\n          console.error(e)\n        }\n      }else{\n        setResults({['type']: 'card', ['items']: []})\n        callModal(false)\n      }\n      \n    } else{\n      try{\n        fetch(`https://api.nytimes.com/svc/books/v3/lists/best-sellers/history.json?${checkedStatus}=${searchData}&api-key=${process.env.REACT_APP_KEY}`)\n        .then( data => {\n          if(data.ok){\n            return data.json();\n          }  \n          else{\n            throw new Error(\"Status code error :\" + data.status)\n          } \n        } )\n        .then( data => {\n          setResults({['type']: 'card', ['items']: [...data.results]})\n        } )\n        .catch( (err) => {\n          setResults({['type']: 'card', ['items']: []})\n        })\n      } catch(e){\n        console.error(e)\n      }\n    }\n    }\n\n  }\n\n  function callModal(resp){\n    setShow(true)\n    setModal(resp)\n    if(resp === true){\n      setTimeout(() => {\n        setShow(false)\n      }, 2000);\n    }\n  }\n  return (\n\n    <div id=\"books\">\n      <h1 className=\"title\">Search for past weekly rankings, authors, or publishing companies</h1>\n        <div id=\"search-list\">\n          <div className=\"search-item\">\n\n          <BookSearch fetchInput={fetchInput}/>\n          {resultTitle !== '' ? <h5 id=\"srchBook\" >SEARCH RESULTS FOR: {resultTitle}</h5>: null}\n          {results.items.length === 0 && resultTitle !== ''? <h6>NO RESULTS</h6>: null}\n\n              <Modal\n            show={show}\n            onHide={() => setShow(false)}\n            backdrop=\"static\"\n            keyboard={false}\n          >\n            <Modal.Header closeButton>\n              <Modal.Title>Notification</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n              {condModal ? 'Success!' :'Invalid input. Please, try again.'}\n            </Modal.Body>\n  \n          </Modal>\n\n\n          {results.type === '' ? null: results.items.map( (bookObj, index) => <CardItem key={index} book={bookObj} results={results} callModal={callModal}/>)}\n          </div>\n        </div>\n      </div>\n  \n  )\n}\n\nexport default BookSelection"],"mappings":"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"},"metadata":{},"sourceType":"module"}